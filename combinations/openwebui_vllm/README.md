

# Open WebUI + vLLM

–ó–∞–ø—É—Å–∫ LLM —Å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:
- [**Open WebUI**](https://github.com/open-webui/open-webui) - –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å LLM
- [**vLLM**](https://github.com/vllm-project/vllm) - –∑–∞–ø—É—Å–∫ LLM –º–æ–¥–µ–ª–µ–π


## üê≥üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```
git clone https://github.com/sergey21000/webui-llm-examlples
cd webui-llm-examlples/anythingllm_ollama
```

–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª `.env` —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```sh
cp env.example .env
```
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–µ `.env` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ (—Å—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–∞ `.env`)

–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥–∏ —Å CLI –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏ –∑–∞–ø—É—Å–∫–∞ vLLM (–≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ñ–∏–≥–æ–≤ —Å—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é)
```
üìÅ ../data/
‚îú‚îÄ‚îÄ üìÅ vllm/                      # –¥–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å–∞ vLLM
|   ‚îî‚îÄ‚îÄ üìÅ configs/               # –∫–æ–Ω—Ñ–∏–≥–∏ CLI –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∑–∞–ø—É—Å–∫–∞ vLLM
|       |‚îÄ‚îÄ vllm_config_cpu.yml   # –∫–æ–Ω—Ñ–∏–≥ CPU (–¥–ª—è –∑–∞–ø—É—Å–∫–∞ `docker compose up`)
|       ‚îî‚îÄ‚îÄ vllm_config_cuda.yml  # –∫–æ–Ω—Ñ–∏–≥ CUDA (–¥–ª—è –∑–∞–ø—É—Å–∫–∞ `docker compose -f compose.cuda.yml up`)
‚îî‚îÄ‚îÄ üìÅ openwebui/                 # –¥–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å–∞ Open WebUI
```

–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
- –ó–∞–ø—É—Å–∫ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π CPU (–¥–ª—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π avx512)
  ```sh
  docker compose up -d
  ```
- –ó–∞–ø—É—Å–∫ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π CUDA
  ```sh
  docker compose -f compose.cuda.yml up -d
  ```
- –ó–∞–ø—É—Å–∫ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π CPU (–¥–ª—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π avx2)
  –í–∞—Ä–∏–∞–Ω—Ç —Å –∑–∞–ø—É—Å–∫–æ–º vLLM –∏–∑ –≥–æ—Ç–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞
  ```sh
  docker compose -f compose.cpu.avx2.yml up -d
  ```
  –í–∞—Ä–∏–∞–Ω—Ç —Å–æ —Å–±–æ—Ä–∫–æ–π —Å–≤–æ–µ–≥–æ –æ–±—Ä–∞–∑–∞
  ```sh
  git clone https://github.com/vllm-project/vllm
  docker compose -f compose.build.cpu.avx2.yml up
  ```
  –£–∑–Ω–∞—Ç—å –∫–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ [CPU-Z](https://www.cpuid.com/softwares/cpu-z.html)

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
```sh
docker compose ps
```
–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
```
docker compose logs -f
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–µ—Ä–≤–∏—Å—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ –∞–¥—Ä–µ—Å–∞–º:
- Open WebUI: http://127.0.0.1:3000
- vLLM API: http://127.0.0.1:8000/v1
- vLLM Models http://127.0.0.1:8000/v1/models

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ Open WebUI –≤–≤–µ—Å—Ç–∏ –ø–æ—á—Ç—É –∏ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–º–æ–∂–Ω–æ –ª—é–±—ã–µ, –≥–ª–∞–≤–Ω–æ–µ –∑–∞–ø–æ–º–Ω–∏—Ç—å)  
–ò–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –≤ —Ñ–∞–π–ª–µ `.env` –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Å–µ—Ä–≤–∏—Å–æ–≤

–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ LLM:
- –ù–∞–∂–∞—Ç—å –Ω–∞ –∑–Ω–∞—á–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ª–µ–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É —ç–∫—Ä–∞–Ω–∞ - `–ù–∞—Å—Ç—Ä–æ–π–∫–∏` -> `–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–¥–º–∏–Ω–∏–º—Ç—Ä–∞—Ç–æ—Ä–∞` -> `–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è` -> –Ω–∞–∂–∞—Ç—å `+` –Ω–∞–ø—Ä–æ—Ç–∏–≤ –ø—É–Ω–∫—Ç–∞ `–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏ API OpenAI` -> –≤–ø–∏—Å–∞—Ç—å http://vllm:8000/v1 –≤ –ø–æ–ª–µ URL -> `–°–æ—Ö—Ä–∞–Ω–∏—Ç—å`

–í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ —á–∞—Ç–∞ —Ç–æ–∂–µ –Ω—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –º–æ–¥–µ–ª—å –≥–¥–µ –Ω–∞–ø–∏—Å–∞–Ω–æ `–í—ã–±–µ—Ä–∏—Ç–µ –ú–æ–¥–µ–ª—å`  
–û—Ç–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π - –¥–æ–±–∞–≤–∏—Ç—å `/no_think ` –≤ –Ω–∞—á–∞–ª–æ –∑–∞–ø—Ä–æ—Å–∞


---
–í–∞—Ä–∏–∞–Ω—Ç –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è `-f compose.cuda.yml`

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `COMPOSE_FILE`
- Linux
  ```sh
  export COMPOSE_FILE=compose.cuda.yml
  ```
- Windows PowerShell
  ```ps1
  $env:COMPOSE_FILE="compose.cuda.yml"
  ```

–ó–∞–ø—É—Å–∫
```sh
docker compose up -d
```
